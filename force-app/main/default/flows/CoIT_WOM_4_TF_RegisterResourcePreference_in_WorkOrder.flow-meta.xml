<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>57.0</apiVersion>
    <areMetricsLoggedToDataCloud>false</areMetricsLoggedToDataCloud>
    <assignments>
        <name>Assigment_Count</name>
        <label>Assigment Count</label>
        <locationX>897</locationX>
        <locationY>600</locationY>
        <assignmentItems>
            <assignToReference>V_WorkOfferDetailsAccepted</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>WorkOfferDetailsAccept_Collection</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>V_WorkOfferDetailRejected</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>WorkOfferDetailsReject_Collection</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Acceptance_Status</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assignment_Info_Other_Work_Offers_By_Base</name>
        <label>Assignment Info Other Work Offers By Base</label>
        <locationX>270</locationX>
        <locationY>1248</locationY>
        <assignmentItems>
            <assignToReference>V_OtherWorkOffersByBase.WOM_Acceptance_Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Accept</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>V_OtherWorkOffersByBase.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Othr_Work_Offers_By_Base.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>C_OtherWorkOffersByBase</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>V_OtherWorkOffersByBase</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Othr_Work_Offers_By_Base</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assignment_Info_Reject_Other_Work_Offers_By_Base</name>
        <label>Assignment Info Reject Other Work Offers By Base</label>
        <locationX>1194</locationX>
        <locationY>1248</locationY>
        <assignmentItems>
            <assignToReference>V_OtherWorkOffersByBase.WOM_Acceptance_Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Reject</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>V_OtherWorkOffersByBase.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Other_Work_Offers_By_Base_For_reject.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>C_OtherWorkOffersByBase</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>V_OtherWorkOffersByBase</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Other_Work_Offers_By_Base_For_reject</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assignment_The_Best_Candidate</name>
        <label>Assignment The Best Candidate</label>
        <locationX>237</locationX>
        <locationY>3348</locationY>
        <assignmentItems>
            <assignToReference>V_IsTheBestCandidate</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Lop_Order_By_Grade</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Count_Collection_Accepted</name>
        <label>Count Collection Accepted</label>
        <locationX>501</locationX>
        <locationY>3132</locationY>
        <assignmentItems>
            <assignToReference>CountCollectionAccepted</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>WorkOfferDetailsAccept_Collection</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Exist_Record_Work_Offer_Accepted</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Resource_Preference_Excluded</name>
        <label>Set Resource Preference Excluded</label>
        <locationX>1172</locationX>
        <locationY>1716</locationY>
        <assignmentItems>
            <assignToReference>New_ResourcePreference_Record.PreferenceType</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Excluded</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>New_ResourcePreference_Record.RelatedRecordId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.ServiceAppointment__r.ParentRecordId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>New_ResourcePreference_Record.ServiceResourceId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.WOM_Service_Resource__r.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>New_ResourcePreference_Record.CoIT_WOM_TransactionAfterScheduled__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>None</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_WorkOffer_With_Rejected</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Resource_Preference_Preferred</name>
        <label>Set Resource Preference Preferred</label>
        <locationX>578</locationX>
        <locationY>2040</locationY>
        <assignmentItems>
            <assignToReference>New_ResourcePreference_Record.PreferenceType</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Preferred</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>New_ResourcePreference_Record.RelatedRecordId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.ServiceAppointment__r.ParentRecordId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>New_ResourcePreference_Record.ServiceResourceId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.WOM_Service_Resource__r.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>V_WorkOfferDetailsAccepted</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>WorkOfferDetailsAccept_Collection</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>New_ResourcePreference_Record.CoIT_WOM_TransactionAfterScheduled__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Remove After Scheduled</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_WorkOffer_With_Accepted</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Resource_Preference_Required</name>
        <label>Set Resource Preference Required</label>
        <locationX>50</locationX>
        <locationY>1932</locationY>
        <assignmentItems>
            <assignToReference>New_ResourcePreference_Record.PreferenceType</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Required</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>New_ResourcePreference_Record.RelatedRecordId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.ServiceAppointment__r.ParentRecordId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>New_ResourcePreference_Record.ServiceResourceId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.WOM_Service_Resource__r.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>New_ResourcePreference_Record.CoIT_WOM_TransactionAfterScheduled__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Change to Preferred After Scheduled</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>V_IsTheBestCandidate</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_WorkOffer_With_Accepted</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Resource_PreferenceRequired</name>
        <label>Set Resource Preference Required</label>
        <locationX>314</locationX>
        <locationY>2040</locationY>
        <assignmentItems>
            <assignToReference>New_ResourcePreference_Record.PreferenceType</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Required</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>New_ResourcePreference_Record.RelatedRecordId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.ServiceAppointment__r.ParentRecordId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>New_ResourcePreference_Record.ServiceResourceId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.WOM_Service_Resource__r.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>V_WorkOfferDetailsAccepted</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>WorkOfferDetailsAccept_Collection</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>New_ResourcePreference_Record.CoIT_WOM_TransactionAfterScheduled__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Remove After Scheduled</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_WorkOffer_With_Accepted</targetReference>
        </connector>
    </assignments>
    <collectionProcessors>
        <name>Order_By_Grade</name>
        <elementSubtype>SortCollectionProcessor</elementSubtype>
        <label>Order By Grade</label>
        <locationX>501</locationX>
        <locationY>3024</locationY>
        <collectionProcessorType>SortCollectionProcessor</collectionProcessorType>
        <collectionReference>WorkOfferDetailsAccept_Collection</collectionReference>
        <connector>
            <targetReference>Count_Collection_Accepted</targetReference>
        </connector>
        <limit>1</limit>
        <sortOptions>
            <doesPutEmptyStringAndNullFirst>false</doesPutEmptyStringAndNullFirst>
            <sortField>WOM_Grade__c</sortField>
            <sortOrder>Desc</sortOrder>
        </sortOptions>
    </collectionProcessors>
    <decisions>
        <name>Acceptance_Status</name>
        <label>Acceptance Status</label>
        <locationX>897</locationX>
        <locationY>708</locationY>
        <defaultConnector>
            <targetReference>Create_or_Update_Resource_Preference</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Accept</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.WOM_Acceptance_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Accept</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Did_the_base_accept</targetReference>
            </connector>
            <label>Accept</label>
        </rules>
        <rules>
            <name>Reject</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.WOM_Acceptance_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Reject</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Did_the_base_reject</targetReference>
            </connector>
            <label>Reject</label>
        </rules>
    </decisions>
    <decisions>
        <name>Create_or_Update_Resource_Preference</name>
        <label>Create Resource Preference</label>
        <locationX>897</locationX>
        <locationY>2508</locationY>
        <defaultConnector>
            <targetReference>Update_Has_An_Answer</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Create_Outcome</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.WOM_HasAnAnswer__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.WOM_Acceptance_Status__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Pending</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_Preference_Service_Resource</targetReference>
            </connector>
            <label>Create</label>
        </rules>
        <rules>
            <name>Update_Outcome</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.WOM_HasAnAnswer__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.WOM_Acceptance_Status__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Pending</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Resource_Preference</targetReference>
            </connector>
            <label>Update</label>
        </rules>
    </decisions>
    <decisions>
        <name>Did_the_base_accept</name>
        <label>Did the base accept?</label>
        <locationX>248</locationX>
        <locationY>816</locationY>
        <defaultConnector>
            <targetReference>Update_Last_Dat_of_Offer_Acceptance</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>DidTheBaseAccept_Outcome</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.WOM_ServiceResource_AdminUser__r.Id</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>UserId</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>the_previous_value_was_accepted</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Did_the_base_reject</name>
        <label>Did the base reject?</label>
        <locationX>1172</locationX>
        <locationY>816</locationY>
        <defaultConnector>
            <targetReference>Set_Resource_Preference_Excluded</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Did_the_base_reject_Outcome</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.WOM_ServiceResource_AdminUser__r.Id</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>UserId</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>The_previous_value_was_reject</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Did_the_baseAccept</name>
        <label>Did the base accept?</label>
        <locationX>446</locationX>
        <locationY>1932</locationY>
        <defaultConnector>
            <targetReference>Set_Resource_Preference_Preferred</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Did_the_baseAccept_Outcome</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Work_Type_Bussines_Behaivor.CoIt_Solo_Se_Notifica_al_Base__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Resource_PreferenceRequired</targetReference>
            </connector>
            <label>es</label>
        </rules>
    </decisions>
    <decisions>
        <name>Evaluate_Number_Of_Candidates_Pending</name>
        <label>Evaluate Number Of Candidates Pending</label>
        <locationX>897</locationX>
        <locationY>2916</locationY>
        <defaultConnector>
            <targetReference>Evaluate_ServiceAppointmentSchedulingModel</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Evaluate_NumberOfCandidatesPending_Outcome</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>F_CandidatesPending</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Order_By_Grade</targetReference>
            </connector>
            <label>Igual 0</label>
        </rules>
    </decisions>
    <decisions>
        <name>Evaluate_Service_AppointmentSchedulingModel</name>
        <label>Evaluate Service Appointment Scheduling Model</label>
        <locationX>765</locationX>
        <locationY>3348</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>ByOffer_Outcome</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ServiceAppointment__r.CoIT_WOM_Scheduling_Model__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>By Offer</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Waiting_For_Candidates_Finish</targetReference>
            </connector>
            <label>By Offer</label>
        </rules>
        <rules>
            <name>Direct_AssignmentWithAcceptance</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ServiceAppointment__r.CoIT_WOM_Scheduling_Model__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>By Direct Assigment with Acceptance</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Failed_Acceptance</targetReference>
            </connector>
            <label>Direct Assignment With Acceptance</label>
        </rules>
    </decisions>
    <decisions>
        <name>Evaluate_ServiceAppointmentSchedulingModel</name>
        <label>Evaluate Service Appointment Scheduling Model</label>
        <locationX>897</locationX>
        <locationY>3924</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>ByOffer_ServiceAppointmentSchedulingModel</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ServiceAppointment__r.CoIT_WOM_Scheduling_Model__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>By Offer</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Is_The_BestCandidate</targetReference>
            </connector>
            <label>By Offer</label>
        </rules>
        <rules>
            <name>DirectAssignmentWithAcceptance_ServiceAppointmentSchedulingModel</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ServiceAppointment__r.CoIT_WOM_Scheduling_Model__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>By Direct Assigment with Acceptance</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Is_The_BestCandidate</targetReference>
            </connector>
            <label>Direct Assignment With Acceptance</label>
        </rules>
    </decisions>
    <decisions>
        <name>Exist_Record_Work_Offer_Accepted</name>
        <label>Exist Record Work Offer Accepted</label>
        <locationX>501</locationX>
        <locationY>3240</locationY>
        <defaultConnector>
            <targetReference>Evaluate_Service_AppointmentSchedulingModel</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>ExistRecordWorkOfferAccepted_Outcome</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>CountCollectionAccepted</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assignment_The_Best_Candidate</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_The_BestCandidate</name>
        <label>Is The Best Candidate</label>
        <locationX>897</locationX>
        <locationY>4224</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>IsTheBestCandidate_Outcome</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>V_IsTheBestCandidate</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Schedule_Extended</targetReference>
            </connector>
            <label>Is The Best Candidate</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_TheBestCandidate</name>
        <label>Is the best Candidate ?</label>
        <locationX>248</locationX>
        <locationY>1824</locationY>
        <defaultConnector>
            <targetReference>Did_the_baseAccept</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.WOM_Grade__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>100.0</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Work_Type_Bussines_Behaivor.CoIt_Solo_Se_Notifica_al_Base__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Resource_Preference_Required</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>the_previous_value_was_accepted</name>
        <label>The previous value was accepted?</label>
        <locationX>50</locationX>
        <locationY>924</locationY>
        <defaultConnector>
            <targetReference>Get_Work_Offer_Details_By_Base</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>the_previous_value_was_accepted_Outcome</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record__Prior.WOM_Acceptance_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Accept</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Last_Dat_of_Offer_Acceptance</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>The_previous_value_was_reject</name>
        <label>The previous value was reject?</label>
        <locationX>974</locationX>
        <locationY>924</locationY>
        <defaultConnector>
            <targetReference>Get_Work_Offer_Details_By_Base_For_Reject</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>The_previous_value_was_reject_Outcome</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record__Prior.WOM_Acceptance_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Reject</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Resource_Preference_Excluded</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <description>Cuando se acepta una oferta, se actualizan los campos de Last DateTime of Offer Acceptance y Date/Time to Be Considered Offline</description>
    <environments>Default</environments>
    <formulas>
        <name>F_CandidatesPending</name>
        <dataType>Number</dataType>
        <expression>{!$Record.WOM_WorkOffer__r.WOM_NumberOfCandidates__c}-{!V_WorkOfferDetailsAccepted}-{!V_WorkOfferDetailRejected}</expression>
        <scale>0</scale>
    </formulas>
    <formulas>
        <name>UpdateDateTimeToBeConsideredOffline</name>
        <dataType>DateTime</dataType>
        <expression>{!$Flow.CurrentDateTime}+(10/1440)</expression>
    </formulas>
    <formulas>
        <name>UserId</name>
        <dataType>String</dataType>
        <expression>CASESAFEID({!$User.Id})</expression>
    </formulas>
    <interviewLabel>CoIT WOM 4 TF Register Resource Preference in Work Order {!$Flow.CurrentDateTime}</interviewLabel>
    <label>CoIT WOM 4 TF Register Resource Preference in Work Order</label>
    <loops>
        <name>Loop_Other_Work_Offers_By_Base_For_reject</name>
        <label>Loop Other Work Offers By Base For reject</label>
        <locationX>1106</locationX>
        <locationY>1140</locationY>
        <collectionReference>Get_Work_Offer_Details_By_Base_For_Reject</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assignment_Info_Reject_Other_Work_Offers_By_Base</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Update_Other_Work_Offer_Details_By_Base_Rejected</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Loop_Othr_Work_Offers_By_Base</name>
        <label>Loop Other Work Offers By Base</label>
        <locationX>182</locationX>
        <locationY>1140</locationY>
        <collectionReference>Get_Work_Offer_Details_By_Base</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assignment_Info_Other_Work_Offers_By_Base</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Update_Other_Work_Offer_Details_By_Base</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Lop_Order_By_Grade</name>
        <label>Lop Order By Grade</label>
        <locationX>237</locationX>
        <locationY>3456</locationY>
        <collectionReference>WorkOfferDetailsAccept_Collection</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Update_Records_7</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Evaluate_ServiceAppointmentSchedulingModel</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>Create_Preference_Service_Resource</name>
        <label>Create Preference Service Resource</label>
        <locationX>633</locationX>
        <locationY>2616</locationY>
        <connector>
            <targetReference>Update_Has_An_Answer</targetReference>
        </connector>
        <inputReference>New_ResourcePreference_Record</inputReference>
    </recordCreates>
    <recordLookups>
        <name>Get_Work_Offer_Details_By_Base</name>
        <label>Get Work Offer Details By Base</label>
        <locationX>182</locationX>
        <locationY>1032</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Loop_Othr_Work_Offers_By_Base</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>WOM_ServiceResource_AdminUser__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.WOM_ServiceResource_AdminUser__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>WOM_Status__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Open</stringValue>
            </value>
        </filters>
        <filters>
            <field>WOM_Acceptance_Status__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Pending</stringValue>
            </value>
        </filters>
        <filters>
            <field>ServiceAppointment__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.ServiceAppointment__r.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>WOM_WorkOfferDetail__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Work_Offer_Details_By_Base_For_Reject</name>
        <label>Get Work Offer Details By Base For Reject</label>
        <locationX>1106</locationX>
        <locationY>1032</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Loop_Other_Work_Offers_By_Base_For_reject</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>WOM_ServiceResource_AdminUser__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.WOM_ServiceResource_AdminUser__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>WOM_Status__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Open</stringValue>
            </value>
        </filters>
        <filters>
            <field>WOM_Acceptance_Status__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Pending</stringValue>
            </value>
        </filters>
        <filters>
            <field>ServiceAppointment__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.ServiceAppointment__r.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>WOM_WorkOfferDetail__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Work_Type_Bussines_Behaivor</name>
        <label>Get Work Type Bussines Behaivor</label>
        <locationX>897</locationX>
        <locationY>276</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>WorkOfferDetailsAccept_Collection</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ServiceTerritory__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.ServiceAppointment__r.ServiceTerritory.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Scheduling_Model__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.ServiceAppointment__r.CoIT_WOM_Scheduling_Model__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>First_SchedulingPolicy__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.ServiceAppointment__r.FSL__Scheduling_Policy_Used__r.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Scheduling_Type__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.ServiceAppointment__r.CoIT_WOM_Scheduling_Type__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Entitlement__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.WorkOrder__r.Entitlement.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>WorkType__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.WorkOrder__r.WorkType.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>CoIT_WorkType_BusinessBehaivor__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>WorkOfferDetailsAccept_Collection</name>
        <label>Get Work Offer Details Accept</label>
        <locationX>897</locationX>
        <locationY>384</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>WorkOfferDetailsReject_Collection</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>WOM_WorkOffer__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.WOM_WorkOffer__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>WOM_Acceptance_Status__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Accept</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>WOM_WorkOfferDetail__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>WorkOfferDetailsReject_Collection</name>
        <label>Get Work Offer Details Reject</label>
        <locationX>897</locationX>
        <locationY>492</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assigment_Count</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>WOM_WorkOffer__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.WOM_WorkOffer__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>WOM_Acceptance_Status__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Reject</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>WOM_WorkOfferDetail__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Update_Failed_Acceptance</name>
        <label>Update Failed Acceptance</label>
        <locationX>765</locationX>
        <locationY>3456</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.WorkOrder__r.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>CoIT_Is_Failed_Acceptance__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <object>WorkOrder</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Has_An_Answer</name>
        <label>Update Has An Answer</label>
        <locationX>897</locationX>
        <locationY>2808</locationY>
        <connector>
            <targetReference>Evaluate_Number_Of_Candidates_Pending</targetReference>
        </connector>
        <inputAssignments>
            <field>WOM_HasAnAnswer__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Last_Dat_of_Offer_Acceptance</name>
        <label>Update Last Dat of Offer Acceptance</label>
        <locationX>248</locationX>
        <locationY>1716</locationY>
        <connector>
            <targetReference>Is_TheBestCandidate</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.WOM_Service_Resource__r.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>CoIT_Date_Time_for_Consider_Offline__c</field>
            <value>
                <elementReference>UpdateDateTimeToBeConsideredOffline</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>CoIT_LastDateTimeOfOfferAcceptance__c</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <object>ServiceResource</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Other_Work_Offer_Details_By_Base</name>
        <label>Update Other Work Offer Details By Base</label>
        <locationX>182</locationX>
        <locationY>1440</locationY>
        <connector>
            <targetReference>Update_Last_Dat_of_Offer_Acceptance</targetReference>
        </connector>
        <inputReference>C_OtherWorkOffersByBase</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Other_Work_Offer_Details_By_Base_Rejected</name>
        <label>Update Other Work Offer Details By Base Rejected</label>
        <locationX>1106</locationX>
        <locationY>1440</locationY>
        <connector>
            <targetReference>Set_Resource_Preference_Excluded</targetReference>
        </connector>
        <inputReference>C_OtherWorkOffersByBase</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Records_7</name>
        <label>Update Resource Preference Required</label>
        <locationX>325</locationX>
        <locationY>3564</locationY>
        <connector>
            <targetReference>Lop_Order_By_Grade</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ServiceResourceId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Lop_Order_By_Grade.WOM_Service_Resource__r.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>RelatedRecordId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Lop_Order_By_Grade.ServiceAppointment__r.ParentRecordId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>CoIT_WOM_TransactionAfterScheduled__c</field>
            <value>
                <stringValue>Change to Preferred After Scheduled</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>PreferenceType</field>
            <value>
                <stringValue>Required</stringValue>
            </value>
        </inputAssignments>
        <object>ResourcePreference</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Resource_Preference</name>
        <label>Update Resource Preference</label>
        <locationX>897</locationX>
        <locationY>2616</locationY>
        <connector>
            <targetReference>Update_Has_An_Answer</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ServiceResourceId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.WOM_Service_Resource__r.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>RelatedRecordId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.ServiceAppointment__r.ParentRecordId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>PreferenceType</field>
            <value>
                <elementReference>New_ResourcePreference_Record.PreferenceType</elementReference>
            </value>
        </inputAssignments>
        <object>ResourcePreference</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Schedule_Extended</name>
        <label>Update Schedule Extended</label>
        <locationX>765</locationX>
        <locationY>4332</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.ServiceAppointment__r.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>CoIT_WOM_ScheduleExtended__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <object>ServiceAppointment</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Waiting_For_Candidates_Finish</name>
        <label>Update Waiting For Candidates Finish</label>
        <locationX>501</locationX>
        <locationY>3456</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.WorkOrder__r.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>CoIT_WOM_Waiting_for_Candidates_Finished__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <object>WorkOrder</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_WorkOffer_With_Accepted</name>
        <label>Update Work Offer With Accepted Value</label>
        <locationX>248</locationX>
        <locationY>2316</locationY>
        <connector>
            <targetReference>Create_or_Update_Resource_Preference</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.WOM_WorkOffer__c</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>WOM_NumberOfCandidatesAccepted__c</field>
            <value>
                <elementReference>V_WorkOfferDetailsAccepted</elementReference>
            </value>
        </inputAssignments>
        <object>WOM_WorkOffer__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_WorkOffer_With_Rejected</name>
        <label>Update Work Offer With Rejected Value</label>
        <locationX>1172</locationX>
        <locationY>1824</locationY>
        <connector>
            <targetReference>Create_or_Update_Resource_Preference</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.WOM_WorkOffer__c</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>WOM_NumberOfCandidatesRejected__c</field>
            <value>
                <elementReference>V_WorkOfferDetailRejected</elementReference>
            </value>
        </inputAssignments>
        <object>WOM_WorkOffer__c</object>
    </recordUpdates>
    <start>
        <locationX>1183</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Get_Work_Type_Bussines_Behaivor</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>WOM_Acceptance_Status__c</field>
            <operator>IsChanged</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <object>WOM_WorkOfferDetail__c</object>
        <recordTriggerType>Update</recordTriggerType>
        <scheduledPaths>
            <pathType>AsyncAfterCommit</pathType>
        </scheduledPaths>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Active</status>
    <textTemplates>
        <name>body</name>
        <isViewedAsPlainText>false</isViewedAsPlainText>
        <text>&lt;p&gt;User Id : {!$User.Id} Username:&amp;nbsp;{!$User.Username}&lt;/p&gt;</text>
    </textTemplates>
    <variables>
        <name>C_OtherWorkOffersByBase</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>WOM_WorkOfferDetail__c</objectType>
    </variables>
    <variables>
        <name>CountCollectionAccepted</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>currentItemFromSourceCollection</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>WOM_WorkOfferDetail__c</objectType>
    </variables>
    <variables>
        <name>New_ResourcePreference_Record</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ResourcePreference</objectType>
    </variables>
    <variables>
        <name>V_IsTheBestCandidate</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>V_OtherWorkOffersByBase</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>WOM_WorkOfferDetail__c</objectType>
    </variables>
    <variables>
        <name>V_WorkOfferDetailRejected</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
        <value>
            <elementReference>$Record.WOM_WorkOffer__r.WOM_NumberOfCandidatesRejected__c</elementReference>
        </value>
    </variables>
    <variables>
        <name>V_WorkOfferDetailsAccepted</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
        <value>
            <elementReference>$Record.WOM_WorkOffer__r.WOM_NumberOfCandidatesAccepted__c</elementReference>
        </value>
    </variables>
</Flow>
